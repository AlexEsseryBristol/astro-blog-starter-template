---
// src/components/archive/ArchiveSchedulePage.astro
import BaseHead from "../BaseHead.astro";
import Header from "../Header.astro";
import Footer from "../Footer.astro";
import ScheduleGrid from "../Schedule.astro";
import Affiliations from "../site/Affiliations.astro";
import BackLink from "../ui/BackLink.astro";
import TicketBanner from '../site/TicketBanner.astro';
import ScrollButton from "../ui/ScrollButton.astro";
type ScheduleItemType =
  | "Talk"
  | "Panel"
  | "Break"
  | "Workshop"
  | "Keynote"
  | "Registration"
  | "Other";

type ScheduleItem = {
  start: string;
  end?: string;
  title: string;
  type?: ScheduleItemType;
  location?: string;
  speakers?: string;
  description?: string;
  links?: { label: string; href: string }[];
  companyLogo?: { src: string; alt: string; url?: string};
};

type ScheduleDay = {
  dateLabel: string;
  items: ScheduleItem[];
};

type Props = {
  year: "2024" | "2025";
  heading: string;
  locationLine: string;
  days: ScheduleDay[];
};

const { year, heading, locationLine, days } = Astro.props as Props;

const pageTitle = `CiQ ${year} Schedule`;
const pageDesc = `Archive of CiQ ${year} schedule.`;

const backHref = `/archive/${year}`;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={pageTitle} description={pageDesc} />
    <link rel="icon" type="image/png" href="/ciq_logo_small_scaled_rounded.png" />
  </head>

  <body>
    <TicketBanner />
    <Header />
    <ScrollButton/>
    <section class="topbar">
        <BackLink
        defaultHref="/archive/2025"
        defaultLabel="← Back to CiQ 2025 Archive"
        fromParam="from"
        fromValue="schedule"
        alternateHref="/schedule"
        alternateLabel="← Back to Schedule"
        secondaryHref="/archive/2025"
        secondaryLabel="Explore the rest of the CiQ 2025 Archive →"
      />
    </section>

    <section class="hero">
      <div class="inner">
        <h1>{heading}</h1>
        <p>{locationLine}</p>
      </div>
    </section>

    <section class="schedule">
      <div class="scheduleMargin">
        <ScheduleGrid days={days} />
      </div>
    </section>

    <Affiliations />

    <Footer />
  </body>
</html>

<style>
  .topbar {
    background-color: hsl(192, 100%, 15%);
    padding: 1rem 1.5rem;
  }
  @media (max-width: 768px) {
    .topbar {
      display: none !important;
    }
  }
  .hero {
    background-color: #87a5ad;
    padding: 3rem 1.5rem; /* Slightly more breathing room */
    text-align: center;
  }
  @media (max-width: 768px) {
    .hero {
    background-color: #87a5ad;
    padding: 1.5rem 1.5rem 1rem; /* Slightly more breathing room */
    text-align: center;
    }
  }
  .schedule {
    background-color: #00bcae;
    /* Use a responsive padding strategy */
    padding: 2rem 1.5rem 4rem; 
  }

  /* Desktop-only: add the large side margins */
  @media (min-width: 1100px) {
    .schedule {
      padding-left: calc(10% + 2rem);
      padding-right: calc(10% + 2rem);
    }
  }

  .scheduleMargin {
    max-width: 1100px;
    margin: 0 auto; /* Centers the schedule on desktop */
  }

  @media (max-width: 700px) {
    .schedule {
      padding: 1.5rem 0.75rem 3rem; /* Tighter padding for small phones */
    }
    .scheduleMargin {
      margin: 0;
    }
  }
</style>
